# Использование Google Gemini для распознавания рисков сельхоз культур

## Стоимость использования

Согласно [официальному прайс-листу Google Gemini API](https://ai.google.dev/gemini-api/pricing?hl=ru), 
стоимость использования Gemini Pro Vision составляет:

- **Ввод изображений**: $0.0025 за изображение
- **Ввод текста**: $0.0001 за 1K символов
- **Вывод текста**: $0.0001 за 1K символов

Для нашего сценария основной стоимостью будет обработка изображений, которая составляет примерно $2.5 за 1000 изображений.

## Способы обучения и верификации

### 1. Zero-shot learning (обучение с нулевым примером)

Gemini может анализировать изображения без предварительного обучения на конкретных примерах. Мы просто предоставляем общее описание задачи в промпте:

Проанализируй это изображение сельскохозяйственной культуры и определи, есть ли на нем признаки болезней или вредителей.
``` 

**Преимущества:**
- Не требует примеров обучения
- Быстрое внедрение
- Может работать с широким спектром культур и рисков

**Недостатки:**
- Меньшая точность для специфичных заболеваний
- Ограниченная возможность настройки

### 2. Few-shot learning (обучение с несколькими примерами)

Мы можем улучшить точность, предоставив несколько примеров изображений с правильными ответами:
```
Вот несколько примеров:
1. [Изображение ржавчины пшеницы] - это ржавчина пшеницы, характеризуется оранжево-коричневыми пятнами на листьях.
2. [Изображение тли] - это тля, мелкие насекомые, которые питаются соком растений.

Теперь проанализируй это новое изображение и определи, какой риск на нем представлен.
``` 

**Преимущества:**
- Повышенная точность для конкретных типов рисков
- Не требует масштабного обучения

**Недостатки:**
- Ограниченное количество примеров может поместиться в контекст

### 3. Специализированные промпты (промпт-инжиниринг)

Мы можем создать более подробные и структурированные промпты для улучшения качества результатов:
```
Проанализируй это изображение сельскохозяйственной культуры. Шаг 1: Определи тип культуры (пшеница, кукуруза, и т.д.) Шаг 2: Проверь наличие следующих признаков болезней:
- Изменение цвета листьев (пожелтение, покраснение, пятна)
- Деформация листьев или стеблей
- Налет на поверхности растения Шаг 3: Проверь наличие вредителей или следов их деятельности Шаг 4: Сформулируй заключение о состоянии растения
``` 

**Преимущества:**
- Более структурированные и подробные ответы
- Возможность настройки под конкретные задачи

**Недостатки:**
- Требует тщательной настройки промптов

## Верификация результатов

Для оценки качества распознавания мы можем использовать следующие методы:

### 1. Экспертная оценка

- Привлечение агрономов для оценки точности распознавания
- Создание тестового набора с заранее известными ответами

### 2. Сравнение с другими моделями

- Сравнение результатов Gemini с результатами специализированных моделей YOLOv11
- Расчет метрик согласованности между разными моделями

### 3. A/B тестирование

- Разделение тестового набора на группы
- Тестирование разных версий промптов на разных группах
- Сравнение результатов по метрикам точности и полноты

## Метрики оценки

Для оценки работы Gemini API мы можем использовать следующие метрики:

1. **Точность (Precision)**: доля правильно определенных рисков среди всех определенных
2. **Полнота (Recall)**: доля правильно определенных рисков среди всех фактических
3. **F1-score**: гармоническое среднее точности и полноты
4. **Confusion Matrix**: матрица ошибок для анализа конкретных ошибок распознавания
5. **Latency**: время отклика API, важно для приложений реального времени

## Рекомендации по использованию

1. **Комбинируйте подходы**: Используйте комбинацию Zero-shot и Few-shot обучения для лучших результатов

2. **Создайте специфичные промпты для разных культур**: Отдельные промпты для зерновых, овощных и других групп культур

3. **Периодически обновляйте промпты**: Включайте новые заболевания и вредителей по мере их появления

4. **Используйте версионирование промптов**: Сохраняйте историю изменений и результаты для каждой версии

5. **Имплементируйте механизм обратной связи**: Позвольте пользователям отмечать неправильные определения для улучшения системы

6. **Рассмотрите комбинацию с локальными моделями**: Для снижения затрат используйте Gemini только для сложных или неопределенных случаев
```
